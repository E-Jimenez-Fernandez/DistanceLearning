% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weights_from_rf.R
\name{weights_from_rf}
\alias{weights_from_rf}
\title{Machine-learning weights using Random Forests}
\usage{
weights_from_rf(Z, ci_init, ntree = 500, epsilon = 1e-06, ...)
}
\arguments{
\item{Z}{A numeric matrix or data frame of indicators where rows represent
units and columns represent individual indicators.}

\item{ci_init}{A numeric vector representing the initial composite indicator
(typically obtained using an unweighted \eqn{p}-norm or a previous iteration
of the DL2 algorithm).}

\item{ntree}{Integer indicating the number of trees in the Random Forest.
Defaults to \code{500}.}

\item{epsilon}{A small positive constant guaranteeing strictly positive
weights and preventing numerical instability. Defaults to \code{1e-6}.}

\item{...}{Additional arguments passed to \code{randomForest::randomForest()}.}
}
\value{
A numeric vector of normalized weights of length equal to the number
of indicators (columns of \code{Z}). The weights sum to one and are strictly
positive due to the use of \code{epsilon}.
}
\description{
Computes a vector of indicator weights using the variable importance
derived from a Random Forest regression model, where the initial
composite indicator \code{ci_init} is regressed on the individual
indicators. This weighting scheme forms one of the core components
of the DL2 methodology for constructing composite indicators with
machine-learning-based aggregation rules.
}
\details{
The weighting scheme is based on the Random Forest variable importance measure
(IncMSE), extracted via
\code{randomForest::importance(type = 1)}. For each indicator \eqn{X_j}, its
importance reflects the reduction in prediction error when the variable is
used in the ensemble model.

The raw importances may contain zeros or missing entries (e.g., when predictors
are collinear or unused); thus, the function applies:
\deqn{
w_j = \max(\text{importance}_j, \epsilon),
}
followed by normalization to ensure:
\deqn{
\sum_j w_j = 1.
}

This step provides a non-parametric, data-driven weighting mechanism
that captures nonlinearities and interactions in the indicators, and
therefore complements the DL2 norm-based aggregation framework.
}
\examples{
\dontrun{
set.seed(123)
Z <- matrix(runif(50), nrow = 10)
ci0 <- initial_index_pnorm(Z, p = 2)
w_rf <- weights_from_rf(Z, ci_init = ci0, ntree = 200)
w_rf
}

}
